<div class="card p-4 my-3">
	<h3>Geração e exportação de chaves</h3>
	<hr />

	<div class="action">
		<button mat-stroked-button type="button" (click)="generate()" [disabled]="generating || hasKeys">
			{{ generating ? 'Gerando…' : 'Gerar chaves' }}
		</button>
		<button mat-stroked-button color="primary" (click)="downloadPublic()" [disabled]="!hasKeys">
			Baixar chave pública
		</button>

		<button mat-stroked-button color="primary" (click)="downloadPrivate()" [disabled]="!hasKeys">
			Baixar chave privada
		</button>

		<button mat-flat-button color="warn" (click)="confirmDiscard(confirmTpl)" [disabled]="!hasKeys">
			Descartar chaves
		</button>

		<ng-template #confirmTpl>
			<h2 mat-dialog-title>Confirmar descarte</h2>

			<div mat-dialog-content>
				<p> Deseja realmente descartar as chaves geradas?</p>
			</div>

			<div mat-dialog-actions>
				<button mat-stroked-button [mat-dialog-close]="false">Cancelar</button>
				<button mat-flat-button [mat-dialog-close]="true">descartar</button>
			</div>
		</ng-template>

	</div>

	<div *ngIf="hasKeys" class="info">
		<div>
			<strong><em>Thumbprint</em>:</strong>
			<code class="mono">{{ thumbprint }}</code>
		</div>
	</div>

	<hr />
	<p class="note">Toda a operação ocorre no navegador. Não há chamadas ao backend.</p>

	<p class="mt-2 note">
		Esta validação é feita diretamente no navegador utilizando código aberto. Veja o <a href="https://github.com/Webvoto/ElectionAuditor/blob/Key-generation/Site/ClientApp/src/app/components/keygen/keygen.component.ts">código fonte</a>.
	</p>
</div>

